# This is a remap plugin:

	use TSHttpTxnIntercept read a file from locahost dir



# Useage example:


	map http://www.test.com/ http://www.test.com/ @plugin=readfile.so @pparam=pubdir=/data/pub/www.test.com/



# Test:

`mkdir  /data/pub/www.test.com`

`cd /data/pub/www.test.com`

`dd of=test.file if=/dev/zero count=1000 bs=1M`

`wget -SO /dev/null -e http_proxy=127.0.0.1 http://www.test.com/test.file`



# coreinfo:

>Core was generated by `/usr/bin/traffic_server -M --httpport 80:fd=9,443:fd=10:ssl'.

>Program terminated with signal 11, Segmentation fault.
\#0  0x00002b38e870ede0 in ?? ()

>Missing separate debuginfos, use: debuginfo-install fb303-0.6.0-2.el6.x86_64 

>geoip-1.4.8-1.el6.x86_64 scribe-2.2-5.el6.x86_64 thrift-cpp-0.6.0-2.el6.x86_64

>(gdb) bt

>\#0  0x00002b38e870ede0 in ?? ()

>\#1  0x00000000004d2252 in PluginVC::process_close (this=0x2b38e4000f90) at PluginVC.cc:713

>\#2  0x00000000004d2c98 in PluginVC::main_handler (this=0x2b38e4000f90, event=<value optimized out>, data=0x2b38e870ef60) at PluginVC.cc:210

>\#3  0x00000000006a861f in handleEvent (this=0x2b38bf634010, e=0x2b38e870ef60, calling_code=1) at I_Continuation.h:146

>\#4  EThread::process_event (this=0x2b38bf634010, e=0x2b38e870ef60, calling_code=1) at UnixEThread.cc:141

>\#5  0x00000000006a919b in EThread::execute (this=0x2b38bf634010) at UnixEThread.cc:192

>\#6  0x00000000006a74ba in spawn_thread_internal (a=0x14a0cf0) at Thread.cc:88

>\#7  0x00002b38bccd1851 in start_thread (arg=0x2b38bff3c700) at pthread_create.c:301

>\#8  0x00002b38bd97411d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:115

>(gdb) q